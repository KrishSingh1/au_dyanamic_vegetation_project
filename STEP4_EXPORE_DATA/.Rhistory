timestamp.nearest <- forward.nearest
} else {
timestamp.nearest <- backwards.nearest
}
return(timestamp.nearest)
}
########################
file.i <- fileNames[94]
ausplots.fc.i.index <- grep(file.i, insitu.fractional.cover$site_unique)
ausplots.fc.i <- insitu.fractional.cover[ausplots.fc.i.index,]
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique, veg.info$site.info$site_unique)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
for (i in ausplots.fc.i) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique, veg.info$site.info$site_unique)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[i])
dea.file.path <- file.path(directory, paste0(file.i, ".csv"))
dea.fc.i <- read.csv(dea.file.path)
dea.fc.i$time <- as.Date(dea.fc.i$time)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index[1]],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
}
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique, veg.info$site.info$site_unique)
for (i in ausplots.info.i.index) {
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[i])
dea.file.path <- file.path(directory, paste0(file.i, ".csv"))
dea.fc.i <- read.csv(dea.file.path)
dea.fc.i$time <- as.Date(dea.fc.i$time)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index[1]],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
}
file.i <- fileNames[94]
ausplots.fc.i.index <- grep(file.i, insitu.fractional.cover$site_unique)
ausplots.fc.i <- insitu.fractional.cover[ausplots.fc.i.index,]
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique, veg.info$site.info$site_unique)
dea.file.path <- file.path(directory, paste0(file.i, ".csv"))
dea.fc.i <- read.csv(dea.file.path)
dea.fc.i$time <- as.Date(dea.fc.i$time)
for (i in ausplots.info.i.index) {
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[i])
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index[1]],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
}
View(dea.fc.agg.nearest)
dea.fc.sites.nearest <- data.frame("site_unique" = NA,
"time" = NA,
"diff" = NA,
"bs" = NA,
"pv" = NA,
"npv" = NA,
"ue" = NA)
for (i in ausplots.info.i.index) {
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[i])
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index[1]],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
}
View(dea.fc.sites.nearest)
file.i <- fileNames[94]
ausplots.fc.i.index <- grep(file.i, insitu.fractional.cover$site_unique)
ausplots.fc.i <- insitu.fractional.cover[ausplots.fc.i.index,]
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique, veg.info$site.info$site_unique)
dea.file.path <- file.path(directory, paste0(file.i, ".csv"))
dea.fc.i <- read.csv(dea.file.path)
dea.fc.i$time <- as.Date(dea.fc.i$time)
dea.fc.sites.nearest <- data.frame("site_unique" = NA,
"time" = NA,
"diff" = NA,
"bs" = NA,
"pv" = NA,
"npv" = NA,
"ue" = NA)
for (i in ausplots.fc.i.index) {
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[i])
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index[1]],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
}
View(dea.fc.sites.nearest)
View(ausplots.fc.i)
file.i <- fileNames[94]
ausplots.fc.i.index <- grep(file.i, insitu.fractional.cover$site_unique)
ausplots.fc.i <- insitu.fractional.cover[ausplots.fc.i.index,]
dea.file.path <- file.path(directory, paste0(file.i, ".csv"))
dea.fc.i <- read.csv(dea.file.path)
dea.fc.i$time <- as.Date(dea.fc.i$time)
dea.fc.sites.nearest <- data.frame("site_unique" = NA,
"time" = NA,
"diff" = NA,
"bs" = NA,
"pv" = NA,
"npv" = NA,
"ue" = NA)
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
}
View(dea.fc.sites.nearest)
for (i in nrow(ausplots.fc.i)) {
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
}
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
}
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
}
print(ausplots.info.i.index)
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
}
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
break
}
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
print(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
break
}
print(times.backwards)
print(timestamp.nearest)
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
print(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
print(times.backwards)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
print(timestamp.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
print(dea.fc.nearest)
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
break
}
dea.fc.sites.nearest <- data.frame("site_unique" = NA,
"time" = NA,
"diff" = NA,
"bs" = NA,
"pv" = NA,
"npv" = NA,
"ue" = NA)
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
print(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
print(times.backwards)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
print(timestamp.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
print(dea.fc.nearest)
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
print(dea.fc.sites.nearest)
break
}
for (i in nrow(ausplots.fc.i)) {
ausplots.info.i.index <- grep(ausplots.fc.i$site_unique[i], veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
print(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
print(times.backwards)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
print(timestamp.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
print(dea.fc.nearest)
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
print(dea.fc.sites.nearest)
}
nrow(ausplots.fc.i)
for (i in ausplots.fc.i$site_unique) {
ausplots.info.i.index <- grep(i, veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
print(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
print(times.backwards)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
print(timestamp.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
print(dea.fc.nearest)
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
print(dea.fc.sites.nearest)
}
dea.fc.sites.nearest <- data.frame("site_unique" = NA,
"time" = NA,
"diff" = NA,
"bs" = NA,
"pv" = NA,
"npv" = NA,
"ue" = NA)
for (i in ausplots.fc.i$site_unique) {
ausplots.info.i.index <- grep(i, veg.info$site.info$site_unique)
print(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
print(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
print(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
print(times.backwards)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
print(timestamp.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
print(dea.fc.nearest)
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
print(dea.fc.sites.nearest)
}
dea.fc.sites.nearest <- data.frame("site_unique" = NA,
"time" = NA,
"diff" = NA,
"bs" = NA,
"pv" = NA,
"npv" = NA,
"ue" = NA)
for (i in ausplots.fc.i$site_unique) {
ausplots.info.i.index <- grep(i, veg.info$site.info$site_unique)
debug_msg(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
debug_msg(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
debug_msg(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
debug_msg(times.backwards)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
debug_msg(timestamp.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
debug_msg(dea.fc.nearest)
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
debug_msg(dea.fc.sites.nearest)
}
debug <- T
debug_msg(msg){
debug <- T
debug_msg(msg) {
debug <- T
debug_msg(msg) {
debug <- T
debug_msg <- function(msg) {
print(msg)
}
for (i in ausplots.fc.i$site_unique) {
ausplots.info.i.index <- grep(i, veg.info$site.info$site_unique)
debug_msg(ausplots.info.i.index)
ausplots.date.i <- as.Date(veg.info$site.info$visit_start_date[ausplots.info.i.index])
debug_msg(ausplots.date.i)
times.forwards <- seq(ausplots.date.i, by='1 days', length = 31)
debug_msg(times.forwards)
times.backwards <- seq(ausplots.date.i, by='-1 days', length = 31)
debug_msg(times.backwards)
forward.nearest <- get_1_directional_nearest_timestep(times.forwards,
dea.fc.i, ausplots.date.i)
backwards.nearest <- get_1_directional_nearest_timestep(times.backwards,
dea.fc.i, ausplots.date.i)
timestamp.nearest <- get_nearest_timestep(forward.nearest, backwards.nearest)
debug_msg(timestamp.nearest)
dea.fc.nearest <- subset(dea.fc.i, subset = (time == timestamp.nearest))
debug_msg(dea.fc.nearest)
dea.fc.agg.nearest <- data.frame("site_unique" = veg.info$site.info$site_unique[ausplots.info.i.index],
"time" = dea.fc.nearest$time[1], "diff" = abs(as.numeric(timestamp.nearest[2])),
lapply(dea.fc.nearest[,c("bs","pv","npv","ue")],mean, na.rm = T))
dea.fc.sites.nearest <- rbind(dea.fc.sites.nearest, dea.fc.agg.nearest)
debug_msg(dea.fc.sites.nearest)
}
source("C:/Users/krish/Desktop/DYNAMIC MODEL VEGETATION PROJECT/au_dyanamic_vegetation_project/STEP4_EXPORE_DATA/DEA_Data_Explore_Adv.R", echo=TRUE)
source("C:/Users/krish/Desktop/DYNAMIC MODEL VEGETATION PROJECT/au_dyanamic_vegetation_project/STEP4_EXPORE_DATA/DEA_Data_Explore_Adv.R", echo=TRUE)
View(dea.fc.sites.nearest)
View(dea.fc.agg.nearest)
View(dea.fc.i)
View(dea.fc.nearest)
View(dea.fc.sites.nearest)
write.csv(dea.fc.sites.nearest, "dea_fc_sites_nearest.csv")
merge(dea.fc.sites.nearest, insitu.fractional.cover, by = site_unique)
merge(dea.fc.sites.nearest, insitu.fractional.cover, by = 'site_unique')
dea.fc.sites.plotting <- merge(dea.fc.sites.nearest, insitu.fractional.cover, by = 'site_unique')
View(dea.fc.sites.plotting)
library(ggplot2)
dea.fc.sites.plotting <- merge(dea.fc.sites.nearest, insitu.fractional.cover, by = 'site_unique')
ggplot(dea.fc.sites.plotting, aes(x = bs, y = bare)) + geom_point()
ggplot(dea.fc.sites.plotting, aes(x = bs, y = bare)) + geom_point() + geom_abline
ggplot(dea.fc.sites.plotting, aes(x = bs, y = bare)) + geom_point() + geom_abline()
ggplot(dea.fc.sites.plotting, aes(x = npv, y = brown)) + geom_point() + geom_abline()
ggplot(dea.fc.sites.plotting, aes(x = pv, y = green)) + geom_point() + geom_abline()
# Bare
ggplot(dea.fc.sites.plotting, aes(x = bs, y = bare)) + geom_point() + geom_abline()
# Brown
ggplot(dea.fc.sites.plotting, aes(x = npv, y = brown)) + geom_point() + geom_abline()
View(ausplots.fc.i)
View(dea.fc.i)
# Greenness
ggplot(dea.fc.sites.plotting, aes(x = pv, y = green)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
# Bare
ggplot(dea.fc.sites.plotting, aes(x = bs, y = bare)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
# Brown
ggplot(dea.fc.sites.plotting, aes(x = npv, y = brown)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
# Greenness
ggplot(dea.fc.sites.plotting, aes(y = pv, x = green)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
# Bare
ggplot(dea.fc.sites.plotting, aes(y = bs, x = bare)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
# Brown
ggplot(dea.fc.sites.plotting, aes(y = npv, x = brown)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
?fractional_cover
opaque.fc <- fractional_cover(veg.PI = veg.info$veg.PI, in_canopy_sky = "TRUE")
dea.fc.sites.plotting <- merge(dea.fc.sites.nearest, opaque.fc, by = 'site_unique')
# Greenness
ggplot(dea.fc.sites.plotting, aes(y = pv, x = green)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
# Bare
ggplot(dea.fc.sites.plotting, aes(y = bs, x = bare)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
# Brown
ggplot(dea.fc.sites.plotting, aes(y = npv, x = brown)) + geom_point() + geom_abline() +
xlim(0,100) + ylim(0,100)
